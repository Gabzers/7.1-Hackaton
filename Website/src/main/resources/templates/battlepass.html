<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battle Pass</title>
    <link rel="stylesheet" href="/css/battlepass.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" referrerpolicy="no-referrer">
</head>
<body>
    <header class="top-nav">
        <div class="nav-left">
            <span class="logo-text">StreamFlix</span>
        </div>
        <div class="nav-right">
            <ul class="nav-menu">
                <li><a href="/"><i class="fa-solid fa-house"></i> Home</a></li>
                <li><a href="/shop"><i class="fa-solid fa-cart-shopping"></i> Shop</a></li>
                <li><a href="/battlepass" class="active"><i class="fa-solid fa-gift"></i> Battle Pass Rewards</a></li>
                <li><a href="/login"><i class="fa-solid fa-right-from-bracket"></i> Logout</a></li>
            </ul>
            <span class="nav-icon" id="points">
                Points: <span th:text="${loggedUser != null ? loggedUser.points : 0}"></span>
            </span>
        </div>
    </header>
    <section class="banner">
        <div class="banner-content">
            <h1>Battle Pass Rewards</h1>
            <p>Unlock exclusive rewards as you progress through the tiers!</p>
        </div>
    </section>
    <div class="battle-pass-container">
        <div class="progress-bar-container">
            <div class="progress-bar">
                <div class="progress-bar-fill" id="progress-bar-fill" style="width: 35%;"></div>
                <span class="progress-value" id="progress-value">350 / 950</span>
            </div>
            <div class="tier-number" id="tier-number">Tier 2</div>
        </div>
        <div class="tier-progress-horizontal">
            <div class="tier" onclick="collectReward(1)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(2)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(3)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(4)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(5)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(6)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(7)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(8)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(9)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
            <div class="tier" onclick="collectReward(10)">
                <div class="reward">
                    <img src="/images/FaíscMcQueen.jpg" alt="Reward">
                </div>
            </div>
        </div>
    </div>
    <script>
        let currentTier = 2;
        let currentPoints = 350;
        const maxPoints = 950;
        const pointsPerTier = 100;

        function collectReward(tier) {
            if (tier === currentTier) {
                currentPoints += pointsPerTier;
                if (currentPoints >= maxPoints) {
                    currentPoints = maxPoints;
                } else {
                    currentTier++;
                }
                updateProgress();
            } else {
                alert("You need to unlock the current tier first!");
            }
        }

        function updateProgress() {
            const progressBarFill = document.getElementById("progress-bar-fill");
            const progressValue = document.getElementById("progress-value");
            const tierNumber = document.getElementById("tier-number");

            const progressPercentage = (currentPoints / maxPoints) * 100;
            progressBarFill.style.width = `${progressPercentage}%`;
            progressValue.textContent = `${currentPoints} / ${maxPoints}`;
            tierNumber.textContent = `Tier ${currentTier}`;
        }
    </script>
</body>
</html>
